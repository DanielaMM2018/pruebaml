# üß© Ingenier√≠a de Features y Selecci√≥n de Variables

## 1. Objetivo de la ingenier√≠a de features
El objetivo fue transformar los datos transaccionales y sociodemogr√°ficos en un conjunto de **variables num√©ricas a nivel usuario**, capaces de:
- Capturar intensidad de uso
- Reflejar recencia y frecuencia
- Identificar preferencias por categor√≠a
- Ser aptas para **clustering no supervisado** y modelos predictivos posteriores

---

## 2. Construcci√≥n de features a nivel usuario
La agregaci√≥n se realiz√≥ por `id_cliente`, combinando:
- Informaci√≥n transaccional hist√≥rica
- Ventanas temporales
- Atributos demogr√°ficos

---

## 3. Features generadas desde transacciones

### 3.1 Actividad y comportamiento general
Estas variables capturan el **comportamiento global** del usuario:

| Columna               | Descripci√≥n                    | Prop√≥sito             |
|-----------------------|--------------------------------|----------------------|
| num_tx_total          | Total de transacciones hist√≥ricas | Intensidad de uso    |
| total_gasto           | Gasto monetario total           | Valor del cliente    |
| puntos_ganados_total  | Total de puntos acumulados      | Engagement           |
| puntos_redimidos_total| Total de puntos redimidos       | Uso de beneficio     |
| recencia_dias         | D√≠as desde la √∫ltima transacci√≥n | Actividad reciente  |
| num_tx_negativas      | Transacciones inconsistentes    | Control de calidad   |

> Permiten diferenciar usuarios activos vs inactivos, frecuentes vs ocasionales y detectar posibles anomal√≠as.

---

### 3.2 Features por ventanas temporales
M√©tricas agregadas para 1, 3, 6 y 12 meses:

| Columna base          | Significado          |
|-----------------------|--------------------|
| num_tx_{m}m           | N√∫mero de transacciones |
| gasto_{m}m            | Gasto acumulado     |
| puntos_ganados_{m}m   | Puntos ganados     |
| puntos_redimidos_{m}m | Puntos redimidos   |

> Capturan tendencias recientes que no se observan en totales hist√≥ricos y son claves para segmentaci√≥n.

---

### 3.3 Features por categor√≠a (√∫ltimos 12 meses)

| Columna               | Descripci√≥n                     |
|-----------------------|---------------------------------|
| gasto_<CATEGORIA>_12m | Gasto total por categor√≠a       |
| pct_tecnologia_12m    | Proporci√≥n del gasto en TECNOLOG√çA |
| compra_tecnologia     | Indicador binario de compra en TECNOLOG√çA |

> Permiten identificar preferencias de consumo y usuarios con afinidad tecnol√≥gica, clave para clustering y forecasting.

---

### 3.4 Promedios de gasto en TECNOLOG√çA

| Columna                    | Descripci√≥n           |
|-----------------------------|--------------------|
| avg_gasto_tecnologia_3m     | Promedio mensual 3 meses |
| avg_gasto_tecnologia_6m     | Promedio mensual 6 meses |
| avg_gasto_tecnologia_12m    | Promedio mensual 12 meses |

> Evaluar estabilidad del gasto tecnol√≥gico en el tiempo.

---

## 4. Features demogr√°ficas

| Columna          | Descripci√≥n             |
|------------------|-----------------------|
| edad             | Edad del cliente       |
| estrato_social   | Nivel socioecon√≥mico   |
| saldo_puntos     | Puntos acumulados actuales |

> Complementan el comportamiento transaccional con contexto demogr√°fico.

---

## 5. Transformaciones aplicadas
Se aplic√≥ **log-transform** a variables asim√©tricas:

| Columna original  | Transformada         |
|------------------|--------------------|
| num_tx_total      | log_num_tx_total    |
| total_gasto       | log_total_gasto     |
| puntos_ganados_total | log_puntos_ganados |

> Reducir skewness y evitar que valores extremos dominen el clustering.

---

## 6. An√°lisis de correlaci√≥n
- Matriz de correlaci√≥n de **Pearson** sobre 52 variables num√©ricas  
- Entregables:
  - `correlation_matrix_full.csv`
  - `correlation_matrix_full.png`

> Identificar redundancias, evitar multicolinealidad y reducir dimensionalidad.

---

## 7. Identificaci√≥n y eliminaci√≥n de redundancia
- Se eliminaron pares con |œÅ| ‚â• 0.9  
- Patrones observados:
  - Totales vs ventanas largas
  - Ventanas temporales anidadas
  - Promedios vs acumulados
  - Transformaciones logar√≠tmicas altamente correlacionadas  

üìÑ Archivo: `high_correlation_pairs.csv`

---

## 8. Resultado de la reducci√≥n de features

| M√©trica           | Valor |
|------------------|-------|
| Features iniciales | 52    |
| Features eliminadas | 16   |
| Features finales   | 36    |
| Reducci√≥n         | ~31%  |

üìÑ Dataset final: `features_sin_redundancia.csv`  

> Eliminadas por no aportar informaci√≥n adicional, generar ruido o sesgar el clustering.

---

## 9. Recomendaciones para un clustering adecuado

### 9.1 Escalado
- **Obligatorio**: RobustScaler recomendado por outliers

### 9.2 Selecci√≥n final orientada a distancia
- Revisar varianza post-escalado
- Evitar dominancia de variables acumulativas

### 9.3 Reducci√≥n dimensional (opcional)
- PCA para clustering y visualizaci√≥n (80‚Äì90% varianza)

### 9.4 Evaluaci√≥n de modelos
- KMeans
- Gaussian Mixture Models
- DBSCAN  

**M√©tricas:**
- Silhouette
- Davies‚ÄìBouldin
- Calinski‚ÄìHarabasz

---

## 10. Conclusi√≥n
Se realiz√≥ un proceso completo de **ingenier√≠a de features**, agregaci√≥n por usuario y selecci√≥n de variables:
- Desde datos crudos hasta un dataset num√©rico optimizado
- Eliminaci√≥n de redundancias mejora interpretabilidad y estabilidad
- Dataset final listo para modelos **no supervisados y supervisados**
